{"version":3,"sources":["scripts/main.js"],"names":["messages","document","querySelectorAll","messageLose","querySelector","messageWin","button","cells","table","score","tableGame","render","i","length","row","rows","j","cell","className","textContent","classList","add","randomNumber","resultValue","Math","floor","random","addCell","randomRow","randomCell","filterRow","filter","move","line","push","moveLeft","moveRight","reverse","moveUp","moveDown","addEventListener","contains","remove","map","message","blur","e","copyTableGame","JSON","parse","stringify","code","some","horizontalEnd","verticalEnd","r","c","every"],"mappings":"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","file":"main.215d187c.js","sourceRoot":"../src","sourcesContent":["'use strict';\n\nconst messages = document.querySelectorAll('.message');\nconst messageLose = document.querySelector('.message-lose');\nconst messageWin = document.querySelector('.message-win');\nconst button = document.querySelector('.button');\nconst cells = document.querySelectorAll('.field-cell');\nconst table = document.querySelector('.game-field');\nconst score = document.querySelector('.game-score');\n\nconst tableGame = [\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n];\n\nfunction render() {\n  for (let i = 0; i < tableGame.length; i++) {\n    const row = table.rows[i];\n\n    for (let j = 0; j < tableGame[i].length; j++) {\n      const cell = row.cells[j];\n\n      cell.className = 'field-cell';\n      cell.textContent = '';\n\n      if (tableGame[i][j] !== 0) {\n        cell.classList.add(`field-cell--${tableGame[i][j]}`);\n        cell.textContent = tableGame[i][j];\n      }\n    }\n  }\n}\n\nbutton.addEventListener('click', () => {\n  if (!button.classList.contains('restart')) {\n    button.classList.remove('start');\n    button.classList.add('restart');\n    button.textContent = 'Restart';\n  }\n\n  for (let i = 0; i < tableGame.length; i++) {\n    for (let j = 0; j < tableGame[i].length; j++) {\n      tableGame[i][j] = 0;\n    }\n  }\n\n  [...messages].map((message) => message.classList.add('hidden'));\n  score.textContent = 0;\n\n  [...cells].map((cell) => {\n    cell.className = 'field-cell';\n    cell.textContent = '';\n  });\n\n  addCell();\n  render();\n  button.blur();\n});\n\ndocument.addEventListener('keyup', (e) => {\n  if (\n    !button.classList.contains('restart')\n    || !messageLose.classList.contains('hidden')\n    || !messageWin.classList.contains('hidden')\n  ) {\n    return;\n  }\n\n  const copyTableGame = JSON.parse(JSON.stringify(tableGame));\n\n  switch (e.code) {\n    case 'ArrowLeft':\n      moveLeft();\n      break;\n\n    case 'ArrowRight':\n      moveRight();\n      break;\n\n    case 'ArrowUp':\n      moveUp();\n      break;\n\n    case 'ArrowDown':\n      moveDown();\n      break;\n\n    default:\n      return;\n  }\n\n  if (JSON.stringify(copyTableGame) === JSON.stringify(tableGame)) {\n    return;\n  }\n\n  addCell();\n  render();\n\n  if ([...cells].some((cell) => cell.classList.contains('field-cell--2048'))) {\n    messageWin.classList.remove('hidden');\n  }\n\n  let horizontalEnd = true;\n  let verticalEnd = true;\n\n  for (let r = 0; r < tableGame.length; r++) {\n    for (let c = 0; c < tableGame.length - 1; c++) {\n      if (tableGame[r][c] === tableGame[r][c + 1]) {\n        horizontalEnd = false;\n\n        return;\n      }\n    }\n  }\n\n  for (let r = 0; r < tableGame.length; r++) {\n    const row = [\n      tableGame[0][r],\n      tableGame[1][r],\n      tableGame[2][r],\n      tableGame[3][r],\n    ];\n\n    for (let c = 0; c < row.length - 1; c++) {\n      if (row[c] === row[c + 1]) {\n        verticalEnd = false;\n\n        return;\n      }\n    }\n  }\n\n  if (\n    tableGame.every((row) => row.every((cell) => cell !== 0))\n    && verticalEnd === true\n    && horizontalEnd === true\n  ) {\n    messageLose.classList.remove('hidden');\n  }\n});\n\nfunction randomNumber() {\n  let resultValue = 2;\n  const number = Math.floor(Math.random() * 10);\n\n  if (number === 0) {\n    resultValue = 4;\n  }\n\n  return resultValue;\n}\n\nfunction addCell() {\n  let randomRow = Math.floor(Math.random() * 4);\n  let randomCell = Math.floor(Math.random() * 4);\n\n  while (tableGame[randomRow][randomCell] !== 0) {\n    randomRow = Math.floor(Math.random() * 4);\n    randomCell = Math.floor(Math.random() * 4);\n  }\n\n  tableGame[randomRow][randomCell] = randomNumber();\n}\n\nfunction filterRow(row) {\n  return row.filter((cell) => cell !== 0);\n}\n\nfunction move(row) {\n  let line = filterRow(row);\n\n  for (let j = 0; j < line.length - 1; j++) {\n    if (line[j] === line[j + 1]) {\n      line[j] *= 2;\n      line[j + 1] = 0;\n      score.textContent = +score.textContent + +line[j];\n    }\n  }\n\n  line = filterRow(line);\n\n  while (line.length < tableGame.length) {\n    line.push(0);\n  }\n\n  return line;\n}\n\nfunction moveLeft() {\n  for (let i = 0; i < tableGame.length; i++) {\n    let row = tableGame[i];\n\n    row = move(row);\n    tableGame[i] = row;\n  }\n}\n\nfunction moveRight() {\n  for (let i = 0; i < tableGame.length; i++) {\n    let row = tableGame[i];\n\n    row.reverse();\n    row = move(row);\n    row.reverse();\n    tableGame[i] = row;\n  }\n}\n\nfunction moveUp() {\n  for (let i = 0; i < tableGame.length; i++) {\n    let row = [\n      tableGame[0][i],\n      tableGame[1][i],\n      tableGame[2][i],\n      tableGame[3][i],\n    ];\n\n    row = move(row);\n    tableGame[0][i] = row[0];\n    tableGame[1][i] = row[1];\n    tableGame[2][i] = row[2];\n    tableGame[3][i] = row[3];\n  }\n}\n\nfunction moveDown() {\n  for (let i = 0; i < tableGame.length; i++) {\n    let row = [\n      tableGame[0][i],\n      tableGame[1][i],\n      tableGame[2][i],\n      tableGame[3][i],\n    ];\n\n    row.reverse();\n    row = move(row);\n    row.reverse();\n    tableGame[0][i] = row[0];\n    tableGame[1][i] = row[1];\n    tableGame[2][i] = row[2];\n    tableGame[3][i] = row[3];\n  }\n}\n"]}